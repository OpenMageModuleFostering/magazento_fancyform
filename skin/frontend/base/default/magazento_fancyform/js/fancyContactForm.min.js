(function(a){function b(b,c,d,e,f,g){var h='<div class="fcf-alphabet">'+g+"</div>";var i=Math.floor(Math.random()*a(window).width());var j=Math.floor(Math.random()*(b.width()-40));j+=b.offset().left;var k=Math.floor(Math.random()*(c.height()/2-40));k+=c.offset().top+c.height()/2;var l=i>b.offset().left+b.width()/2?b.offset().left+b.width()-40:b.offset().left+40;if(Math.abs(k/(j-i))>Math.abs(c.offset().top/(l-i))){k=c.offset().top+c.height()/2;j=c.offset().left+c.width()/2}a(h).appendTo("body").css({top:0,left:i+"px"}).fadeIn(e).animate({top:k+"px",left:j+"px",fontSize:"26px",width:"40px",height:"40px"},f).fadeOut(d,function(){a(this).remove()})}a.fn.fancyContactForm=function(c){var d={urlSubmit:"test.php",methodSubmit:"POST",afterSubmit:function(a){},error:function(a,b,c){},stampAppearingTime:1e3,dataType:"html",textAppearingTime:1e3,letterMovingTime:3e3,envelopeOpeningTime:1e3,envelopeClosingTime:1e3,letterFadingInTime:300,letterFadingOutTime:300,thanksText:function(a){return"Well Done, thank you for your message !<br/>Sent : "+a}};var c=a.extend(d,c);this.each(function(){var d=a(this),e=d.find(".fcf-envelope-ft"),f=d.find(".fcf-envelope"),g=d.find(".fcf-contact-form");g.find("input, textarea").keypress(function(a){b(f,e,c.letterFadingOutTime,c.letterFadingInTime,c.letterMovingTime,String.fromCharCode(a.which))});f.animate({height:"750px"},c.envelopeOpeningTime);g.submit(function(b){b.preventDefault();a.ajax({url:c.urlSubmit,type:c.methodSubmit,data:a(g).serialize(),dataType:c.dataType,success:function(b){c.afterSubmit(b);a(".fcf-alphabet").remove();console.log(f.offset().left);f.animate({height:"400px"},c.envelopeClosingTime).css("marginLeft",f.offset().left-a(".fcf-contact").offset().left+"px").animate({marginLeft:a(window).width()+"px"},function(){var d='<div class="fcf-confirmation">'+c.thanksText(b)+"</div>";var e='<div class="fcf-stamp"><div class="fcf-stamp-borders"></div><div class="fcf-lines"></div></div>';a(e).css({opacity:"0",position:"absolute"}).appendTo(".fcf-contact");a(d).css({opacity:"0",position:"absolute"}).appendTo(".fcf-contact");var g=a(".fcf-confirmation").height();var h=a(".fcf-confirmation").width();var i=a(".fcf-stamp").height();var j=a(".fcf-stamp").width();a(".fcf-stamp").css({top:"-200px",left:(a(".fcf-contact").width()-j)/2+"px"}).animate({opacity:1,top:(a(".fcf-contact").height()-2*g)/2-i+"px"},c.stampAppearingTime);a(".fcf-confirmation").css({top:(a(".fcf-contact").height()-g)/2+"px",left:-h+"px"}).animate({opacity:1,left:(a(".fcf-contact").width()-h)/2+"px"},c.textAppearingTime);f.remove()})},error:function(a,b,d){c.error(a,b,d)}})});a(window).resize(function(){var b=a(".fcf-confirmation").height();var c=a(".fcf-confirmation").width();var d=a(".fcf-stamp").height();var e=a(".fcf-stamp").width();a(".fcf-stamp").css({top:(a(".fcf-contact").height()-2*b)/2-d+"px",left:(a(".fcf-contact").width()-e)/2+"px"});a(".fcf-confirmation").css({top:(a(".fcf-contact").height()-b)/2+"px",left:(a(".fcf-contact").width()-c)/2+"px"})})})}})(jQuery)